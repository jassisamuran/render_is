{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,redirect,useNavigate}from'react-router-dom';import{ReactLocation,Router}from'react-location';import{Form,Row,Col,Button,Table}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Loader from'../components/Loader';import{LinkContainer}from'react-router-bootstrap';import Message from'../components/Message';import{getUserDetails,updateUserProfile}from'../actions/userActions';import{listMyOrders}from'../actions/orderActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ProfileScreen=_ref=>{let{}=_ref;const navigate=useNavigate();const[name,setName]=useState('');const[email,setEmail]=useState('');const[password,setpassword]=useState('');const[confirmpassword,setConfirmpassword]=useState('');const[message,setMessage]=useState(null);const userDetails=useSelector(state=>state.userDetails);const{loading,error,user}=userDetails;const userLogin=useSelector(state=>state.userLogin);const userUpdateProfile=useSelector(state=>state.userUpdateProfile);const{success}=userUpdateProfile;const orderListMy=useSelector(state=>state.orderListMy);const{loading:loadingOrders,error:errorOrders,orders}=orderListMy;const{userInfo}=userLogin;const dispatch=useDispatch();const location=new ReactLocation();useEffect(()=>{if(!userInfo){navigate('/login');}else{if(!user.name){dispatch(getUserDetails('profile'));dispatch(listMyOrders());}else{setName(user.name);setEmail(user.email);}}},[dispatch,userInfo,user]);const submitHandler=e=>{e.preventDefault();if(password!==confirmpassword){setMessage('Password do not match');}else{dispatch(updateUserProfile({id:user._id,name,email,password}));}// dispatch(register(name,email,password))\n};const setPassword=()=>{console.log('set password');};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Profile\"}),message&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:message}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),success&&/*#__PURE__*/_jsx(Message,{variant:\"success\",children:\"Profile Updated\"}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"name\",placeholder:\"Enter name\",value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter password\",value:password,onChange:e=>setpassword(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"confirmpassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter password\",value:confirmpassword,onChange:e=>setConfirmpassword(e.target.value)})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Update\"})]})]}),/*#__PURE__*/_jsxs(Col,{md:9,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Orders\"}),loadingOrders?/*#__PURE__*/_jsx(Loader,{}):errorOrders?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorOrders}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DATE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"TOTAL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PAID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DELIVERED\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order._id}),/*#__PURE__*/_jsx(\"td\",{children:order.createdAt.substr(0,10)}),/*#__PURE__*/_jsx(\"td\",{children:order.totalPrice}),/*#__PURE__*/_jsx(\"td\",{children:order.isPaid?order.paidAt.substr(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:order.isDelivered?order.deliveredAt.substr(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:\"/order/\".concat(order._id),children:/*#__PURE__*/_jsx(Button,{className:\"btn-sm\",variant:\"light\",children:\"Details\"})})})]},order._id))})]})]})]});};export default ProfileScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","redirect","useNavigate","ReactLocation","Router","Form","Row","Col","Button","Table","useDispatch","useSelector","Loader","LinkContainer","Message","getUserDetails","updateUserProfile","listMyOrders","ProfileScreen","navigate","name","setName","email","setEmail","password","setpassword","confirmpassword","setConfirmpassword","message","setMessage","userDetails","state","loading","error","user","userLogin","userUpdateProfile","success","orderListMy","loadingOrders","errorOrders","orders","userInfo","dispatch","location","submitHandler","e","preventDefault","id","_id","setPassword","console","log","target","value","map","order","createdAt","substr","totalPrice","isPaid","paidAt","color","isDelivered","deliveredAt"],"sources":["/home/kali/Desktop/c++/proshop/src/screens/ProfileScreen.js"],"sourcesContent":["import React,{useState,useEffect} from 'react'\nimport {Link, redirect,useNavigate} from 'react-router-dom'\nimport { ReactLocation, Router } from 'react-location'\nimport {Form,Row,Col,Button, Table} from 'react-bootstrap'\nimport {useDispatch,useSelector} from 'react-redux'\nimport Loader from '../components/Loader'\nimport {LinkContainer} from 'react-router-bootstrap'\nimport Message from '../components/Message'\nimport { getUserDetails,updateUserProfile} from '../actions/userActions'\nimport { listMyOrders } from '../actions/orderActions'\nconst ProfileScreen = ({}) => {\n    const navigate=useNavigate()\n    const [name,setName]=useState('')\n    const [email,setEmail]=useState('')\n    const [password,setpassword]=useState('')\n    const [confirmpassword,setConfirmpassword]=useState('')\n    const [message,setMessage]=useState(null)\n     \n    const userDetails=useSelector(state=>state.userDetails)\n    const {loading,error,user}=userDetails\n    const userLogin=useSelector(state=>state.userLogin)\n    \n    const userUpdateProfile=useSelector(state=>state.userUpdateProfile)\n    const {success}=userUpdateProfile\n\n\n    const orderListMy=useSelector(state=>state.orderListMy)\n    const {loading:loadingOrders,error:errorOrders,orders}=orderListMy\n\n    \n    const {userInfo}=userLogin\n    const dispatch=useDispatch()\n\n    \n\n    const location = new ReactLocation()\n    useEffect(()=>{\n      if(!userInfo){\n        navigate('/login')\n      }else{\n        if(!user.name){\n            dispatch(getUserDetails('profile'))\n            dispatch(listMyOrders())\n        }else{\n            setName(user.name)\n            setEmail(user.email)\n            \n\n        }\n      }\n    },[dispatch,userInfo,user])\n  \n    \n    const submitHandler =(e)=>{\n      e.preventDefault()\n        if(password!==confirmpassword){\n            setMessage('Password do not match')\n        }else {\n            dispatch(updateUserProfile({id:user._id,name,email,password}))\n        }\n        // dispatch(register(name,email,password))\n    }\n    const setPassword=()=>{\n      console.log('set password')\n    }\n\n  return <Row>\n        <Col md={3}>\n        \n      <h2>User Profile</h2>\n      {message && <Message variant='danger'>{message}</Message>}\n      {error &&<Message variant='danger'>{error}</Message>}\n      {success &&<Message variant='success'>Profile Updated</Message>}\n      {loading &&<Loader/>}\n      <Form onSubmit={submitHandler}>\n\n      <Form.Group controlId='name'>\n            <Form.Label>Name</Form.Label>\n            <Form.Control type='name' placeholder='Enter name'\n            value={name}\n            onChange={(e)=>setName(e.target.value)}\n            \n            ></Form.Control>\n        </Form.Group>\n\n        \n        <Form.Group controlId='email'>\n            <Form.Label>Email Address</Form.Label>\n            <Form.Control type='email' placeholder='Enter email'\n            value={email}\n            onChange={(e)=>setEmail(e.target.value)}\n            \n            ></Form.Control>\n        </Form.Group>\n\n        <Form.Group controlId='password'>\n            <Form.Label>Password </Form.Label>\n            <Form.Control type='password' placeholder='Enter password'\n            value={password}\n            onChange={(e)=>setpassword(e.target.value)}\n            \n            ></Form.Control>\n        </Form.Group>\n\n        <Form.Group controlId='confirmpassword'>\n            <Form.Label>Confirm Password</Form.Label>\n            <Form.Control type='password' placeholder='Enter password'\n            value={confirmpassword}\n            onChange={(e)=>setConfirmpassword(e.target.value)}\n            \n            ></Form.Control>\n        </Form.Group>\n\n        <Button type='submit' variant='primary'>\n            Update\n        </Button>\n      </Form>\n\n        </Col>\n        <Col md={9}>\n            <h2>My Orders</h2>\n            {loadingOrders?<Loader/>:errorOrders?<Message variant='danger'>{errorOrders}</Message>\n              :(\n                <Table striped bordered hover responsive className='table-sm'>\n                  <thead>\n                    <tr>\n                      <th>ID</th>\n                      <th>DATE</th>\n                      <th>TOTAL</th>\n                      <th>PAID</th>\n                      <th>DELIVERED</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {orders.map(order=>(\n                      <tr key={order._id}>\n                        <td>{order._id}</td>\n                        <td>{order.createdAt.substr(0,10)}</td>\n                        <td>{order.totalPrice}</td>\n                        <td>{order.isPaid?(\n                          order.paidAt.substr(0,10)\n                        ):(<i className='fas fa-times' style={{color:'red'}}></i>)\n                        }\n                        </td>\n                        <td>{order.isDelivered ?(\n                          order.deliveredAt.substr(0,10)\n                        ):(<i className='fas fa-times' style={{color:'red'}}></i>)\n                        }\n                        </td>\n                        <td>\n                          <LinkContainer to={`/order/${order._id}`}>\n                            <Button  className='btn-sm'variant='light'>Details</Button>\n                          </LinkContainer>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </Table>\n\n              )  \n          \n          }\n\n        </Col>\n  </Row>\n}\n\nexport default ProfileScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}