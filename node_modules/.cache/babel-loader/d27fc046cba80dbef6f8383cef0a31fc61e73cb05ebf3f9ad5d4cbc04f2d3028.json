{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{ReactLocation,Router}from'react-location';import{useNavigate,Link}from'react-router-dom';import{Form,Row,Col,Button,ListGroup,Image,Card}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{createOrder}from'../actions/orderActions';import CheckoutSteps from'../components/CheckoutSteps';import Message from'../components/Message';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const PlaceOrderScreen=()=>{const navigate=useNavigate();const dispatch=useDispatch();const cart=useSelector(state=>state.cart);console.log(cart);const adddecimals=num=>{return(Math.round(num*100)/100).toFixed;};cart.itemsPrice=cart.cartItems.reduce((acc,item)=>acc+item.price*item.qty,0);cart.shippingPrice=cart.itemsPrice>100?0:100;cart.taxPrice=Number((0.15*cart.itemsPrice).toFixed(2));cart.totalPrice=(cart.itemsPrice+cart.shippingPrice+cart.taxPrice).toFixed(2);const orderCreate=useSelector(state=>state.orderCreate);const{order,success,error}=orderCreate;console.log(orderCreate);// let content = order.children[0]\nuseEffect(()=>{if(order===undefined)return;if(success){navigate(\"/orders/\".concat(order.createOrder._id));}// eslint-disable-next-line \n},[navigate,success]);const placeholderHandler=()=>{dispatch(createOrder({orderItems:cart.cartItems,shippingAddress:cart.shippingAddress,paymentMethod:'paypal',itemsPrice:cart.itemsPrice,shippingPrice:cart.shippingPrice,postalcode:cart.postalcode,taxPrice:cart.taxPrice,totalPrice:cart.totalPrice}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address:\"}),cart.shippingAddress.address,\",\",cart.shippingAddress.city,' ',cart.shippingAddress.postalcode,\",\",' ',cart.shippingAddress.country]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Method\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Method:\"}),cart.paymentMethod]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items\"}),cart.cartItems.length===0?/*#__PURE__*/_jsx(Message,{children:\"Your cart is empty\"}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cart.cartItems.map((item,index)=>/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:4,children:[item.qty,\" x $\",item.price,\" =$\",item.price]})]})},index))})]})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Items\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.itemsPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Shipping\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.shippingPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Tax\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.taxPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.totalPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{className:\"btn-block\",disabled:cart.cartItems.length===0,onClick:placeholderHandler,children:\"Place Order\"})})]})})})]})]});};export default PlaceOrderScreen;","map":{"version":3,"names":["React","useState","useEffect","axios","ReactLocation","Router","useNavigate","Link","Form","Row","Col","Button","ListGroup","Image","Card","useDispatch","useSelector","createOrder","CheckoutSteps","Message","PlaceOrderScreen","navigate","dispatch","cart","state","console","log","adddecimals","num","Math","round","toFixed","itemsPrice","cartItems","reduce","acc","item","price","qty","shippingPrice","taxPrice","Number","totalPrice","orderCreate","order","success","error","undefined","_id","placeholderHandler","orderItems","shippingAddress","paymentMethod","postalcode","address","city","country","length","map","index","image","name","product"],"sources":["/home/kali/Desktop/c++/proshop/src/screens/PlaceOrderScreen.js"],"sourcesContent":["import React,{useState,useEffect} from 'react'\nimport axios from 'axios'\nimport { ReactLocation, Router } from 'react-location'\nimport {useNavigate,Link} from 'react-router-dom'\nimport {Form,Row,Col,Button,ListGroup,Image,Card} from 'react-bootstrap'\nimport {useDispatch,useSelector} from 'react-redux'\nimport { createOrder } from '../actions/orderActions'\nimport CheckoutSteps from '../components/CheckoutSteps'\nimport Message from '../components/Message'\nconst PlaceOrderScreen = () => {\n    const navigate=useNavigate()\n    const dispatch=useDispatch()\n    const cart=useSelector(state=>state.cart)\n    console.log(cart)\n    const adddecimals=(num)=>{\n        return (Math.round(num*100)/100).toFixed\n    }\n    cart.itemsPrice=(cart.cartItems.reduce((acc,item)=>acc+item.price*item.qty,0))\n    cart.shippingPrice=(cart.itemsPrice > 100 ? 0 : 100);\n    cart.taxPrice=Number((0.15 * cart.itemsPrice).toFixed(2))\n    \n    \n    cart.totalPrice=(cart.itemsPrice +\n        cart.shippingPrice +\n        cart.taxPrice).toFixed(2)\n    \n    \n    const orderCreate=useSelector(state=>state.orderCreate)\n    const {order,success,error}=orderCreate\nconsole.log(orderCreate)\n\n    // let content = order.children[0]\n        \n\n\n    useEffect(()=>{\n        if(order=== undefined)return;\n\n        if(success ){\n            navigate(`/orders/${order.createOrder._id}`)\n            \n\n        }\n        // eslint-disable-next-line \n    },[navigate,success])\n\n    const placeholderHandler=()=>{\n        dispatch(createOrder({orderItems:cart.cartItems,\n        shippingAddress:cart.shippingAddress,\n        paymentMethod:'paypal',\n        itemsPrice:cart.itemsPrice,\n        shippingPrice:cart.shippingPrice,\n        postalcode:cart.postalcode,\n        taxPrice:cart.taxPrice,\n        totalPrice:cart.totalPrice,\n        \n        }))\n    }\n  return (\n    <>\n        <CheckoutSteps step1 step2 step3 step4 />\n        <Row>\n            <Col md={8}>\n                <ListGroup variant='flush'>\n                    <ListGroup.Item>\n                        <h2>Shipping</h2>\n                        <p>\n                            <strong>Address:</strong>\n                            {cart.shippingAddress.address},{cart.shippingAddress.city}{' '}\n                            {cart.shippingAddress.postalcode},{' '}\n                            {cart.shippingAddress.country}\n                        </p>\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                        <h2>Payment Method</h2>\n                        <strong>Method:</strong>\n                        {cart.paymentMethod}\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                        <h2>Order Items</h2>\n                        {cart.cartItems.length === 0 ?<Message>Your cart is empty</Message>\n                        :(<ListGroup variant='flush'>\n                            {cart.cartItems.map((item,index)=>(\n                                <ListGroup.Item key={index}>\n                                    <Row>\n                                        <Col md={1}>\n                                            <Image src={item.image} alt={item.name}\n                                             fluid rounded/>\n                                        </Col>\n                                        <Col>\n                                        <Link to={`/product/${item.product}`}>\n                                            {item.name}\n                                        </Link>\n                                        </Col>\n                                        <Col md={4}>\n                                            {item.qty} x ${item.price} =${item.price}\n                                        </Col>\n                                        </Row>\n                                </ListGroup.Item>\n                            ))}\n                        </ListGroup>)}\n                    </ListGroup.Item>\n                </ListGroup>\n            </Col> \n                                        <Col md={4}>\n                                            <Card>\n                                                <ListGroup variant='flush'>\n                                                    <ListGroup.Item>\n                                                        <h2>Order Summary</h2>\n\n                                                    </ListGroup.Item>\n                                                    <ListGroup.Item>\n                                                        <Row>\n                                                            <Col>Items</Col>\n                                                            <Col>${cart.itemsPrice}</Col>\n                                                        </Row>\n                                                    </ListGroup.Item>\n                                                    <ListGroup.Item>\n                                                        <Row>\n                                                            <Col>Shipping</Col>\n                                                            <Col>${cart.shippingPrice}</Col>\n                                                        </Row>\n                                                    </ListGroup.Item>\n\n                                                    <ListGroup.Item>\n                                                        <Row>\n                                                            <Col>Tax</Col>\n                                                            <Col>${cart.taxPrice}</Col>\n                                                        </Row>\n                                                    </ListGroup.Item>\n\n                                                    <ListGroup.Item>\n                                                        <Row>\n                                                            <Col>Total</Col>\n                                                            <Col>${cart.totalPrice}</Col>\n                                                        </Row>\n                                                    </ListGroup.Item>\n                                                    <ListGroup.Item>\n                                                        {error && <Message variant='danger'>{error}</Message>}\n                                                    </ListGroup.Item>\n                                                    <ListGroup.Item>\n                                                        <Button className='btn-block'\n                                                        disabled={cart.cartItems.length===0}\n                                                        onClick={placeholderHandler}>\n                                                            Place Order\n                                                        </Button>\n                                                    </ListGroup.Item>\n                                                </ListGroup>\n                                            </Card>\n                                        </Col>\n                             \n        </Row>\n      \n    </>\n  )\n}\n\nexport default PlaceOrderScreen"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}