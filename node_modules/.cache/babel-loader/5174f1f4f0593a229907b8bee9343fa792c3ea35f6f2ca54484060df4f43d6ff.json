{"ast":null,"code":"import _slicedToArray from\"/home/kali/Desktop/c++/proshop/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectDestructuringEmpty from\"/home/kali/Desktop/c++/proshop/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import React,{useState,useEffect}from'react';import{Link,redirect,useNavigate}from'react-router-dom';import{ReactLocation,Router}from'react-location';import{Form,Row,Col,Button,Table}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Loader from'../components/Loader';import{LinkContainer}from'react-router-bootstrap';import Message from'../components/Message';import{getUserDetails,updateUserProfile}from'../actions/userActions';import{listMyOrders}from'../actions/orderActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfileScreen=function ProfileScreen(_ref){_objectDestructuringEmpty(_ref);var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setpassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),confirmpassword=_useState8[0],setConfirmpassword=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var userLogin=useSelector(function(state){return state.userLogin;});var userUpdateProfile=useSelector(function(state){return state.userUpdateProfile;});var success=userUpdateProfile.success;var orderListMy=useSelector(function(state){return state.orderListMy;});var loadingOrders=orderListMy.loading,errorOrders=orderListMy.error,orders=orderListMy.orders;var userInfo=userLogin.userInfo;var dispatch=useDispatch();var location=new ReactLocation();useEffect(function(){if(!userInfo){navigate('/login');}else{if(!user.name){dispatch(getUserDetails('profile'));dispatch(listMyOrders());}else{setName(user.name);setEmail(user.email);}}},[dispatch,userInfo,user]);var submitHandler=function submitHandler(e){e.preventDefault();if(password!==confirmpassword){setMessage('Password do not match');}else{dispatch(updateUserProfile({id:user._id,name:name,email:email,password:password}));}// dispatch(register(name,email,password))\n};var setPassword=function setPassword(){console.log('set password');};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Profile\"}),message&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:message}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),success&&/*#__PURE__*/_jsx(Message,{variant:\"success\",children:\"Profile Updated\"}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"name\",placeholder:\"Enter name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter password\",value:password,onChange:function onChange(e){return setpassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"confirmpassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter password\",value:confirmpassword,onChange:function onChange(e){return setConfirmpassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Update\"})]})]}),/*#__PURE__*/_jsxs(Col,{md:9,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Orders\"}),loadingOrders?/*#__PURE__*/_jsx(Loader,{}):errorOrders?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorOrders}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DATE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"TOTAL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PAID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DELIVERED\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(function(order){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order._id}),/*#__PURE__*/_jsx(\"td\",{children:order.createdAt.substr(0,10)}),/*#__PURE__*/_jsx(\"td\",{children:order.totalPrice}),/*#__PURE__*/_jsx(\"td\",{children:order.isPaid?order.paidAt.substr(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:order.isDelivered?order.deliveredAt.substr(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:\"/order/\".concat(order._id),children:/*#__PURE__*/_jsx(Button,{className:\"btn-sm\",variant:\"light\",children:\"Details\"})})})]},order._id);})})]})]})]});};export default ProfileScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","redirect","useNavigate","ReactLocation","Router","Form","Row","Col","Button","Table","useDispatch","useSelector","Loader","LinkContainer","Message","getUserDetails","updateUserProfile","listMyOrders","ProfileScreen","navigate","name","setName","email","setEmail","password","setpassword","confirmpassword","setConfirmpassword","message","setMessage","userDetails","state","loading","error","user","userLogin","userUpdateProfile","success","orderListMy","loadingOrders","errorOrders","orders","userInfo","dispatch","location","submitHandler","e","preventDefault","id","_id","setPassword","console","log","target","value","map","order","createdAt","substr","totalPrice","isPaid","paidAt","color","isDelivered","deliveredAt"],"sources":["/home/kali/Desktop/c++/proshop/src/screens/ProfileScreen.js"],"sourcesContent":["import React,{useState,useEffect} from 'react'\nimport {Link, redirect,useNavigate} from 'react-router-dom'\nimport { ReactLocation, Router } from 'react-location'\nimport {Form,Row,Col,Button, Table} from 'react-bootstrap'\nimport {useDispatch,useSelector} from 'react-redux'\nimport Loader from '../components/Loader'\nimport {LinkContainer} from 'react-router-bootstrap'\nimport Message from '../components/Message'\nimport { getUserDetails,updateUserProfile} from '../actions/userActions'\nimport { listMyOrders } from '../actions/orderActions'\nconst ProfileScreen = ({}) => {\n    const navigate=useNavigate()\n    const [name,setName]=useState('')\n    const [email,setEmail]=useState('')\n    const [password,setpassword]=useState('')\n    const [confirmpassword,setConfirmpassword]=useState('')\n    const [message,setMessage]=useState(null)\n     \n    const userDetails=useSelector(state=>state.userDetails)\n    const {loading,error,user}=userDetails\n    const userLogin=useSelector(state=>state.userLogin)\n    \n    const userUpdateProfile=useSelector(state=>state.userUpdateProfile)\n    const {success}=userUpdateProfile\n\n\n    const orderListMy=useSelector(state=>state.orderListMy)\n    const {loading:loadingOrders,error:errorOrders,orders}=orderListMy\n\n    \n    const {userInfo}=userLogin\n    const dispatch=useDispatch()\n\n    \n\n    const location = new ReactLocation()\n    useEffect(()=>{\n      if(!userInfo){\n        navigate('/login')\n      }else{\n        if(!user.name){\n            dispatch(getUserDetails('profile'))\n            dispatch(listMyOrders())\n        }else{\n            setName(user.name)\n            setEmail(user.email)\n            \n\n        }\n      }\n    },[dispatch,userInfo,user])\n  \n    \n    const submitHandler =(e)=>{\n      e.preventDefault()\n        if(password!==confirmpassword){\n            setMessage('Password do not match')\n        }else {\n            dispatch(updateUserProfile({id:user._id,name,email,password}))\n        }\n        // dispatch(register(name,email,password))\n    }\n    const setPassword=()=>{\n      console.log('set password')\n    }\n\n  return <Row>\n        <Col md={3}>\n        \n      <h2>User Profile</h2>\n      {message && <Message variant='danger'>{message}</Message>}\n      {error &&<Message variant='danger'>{error}</Message>}\n      {success &&<Message variant='success'>Profile Updated</Message>}\n      {loading &&<Loader/>}\n      <Form onSubmit={submitHandler}>\n\n      <Form.Group controlId='name'>\n            <Form.Label>Name</Form.Label>\n            <Form.Control type='name' placeholder='Enter name'\n            value={name}\n            onChange={(e)=>setName(e.target.value)}\n            \n            ></Form.Control>\n        </Form.Group>\n\n        \n        <Form.Group controlId='email'>\n            <Form.Label>Email Address</Form.Label>\n            <Form.Control type='email' placeholder='Enter email'\n            value={email}\n            onChange={(e)=>setEmail(e.target.value)}\n            \n            ></Form.Control>\n        </Form.Group>\n\n        <Form.Group controlId='password'>\n            <Form.Label>Password </Form.Label>\n            <Form.Control type='password' placeholder='Enter password'\n            value={password}\n            onChange={(e)=>setpassword(e.target.value)}\n            \n            ></Form.Control>\n        </Form.Group>\n\n        <Form.Group controlId='confirmpassword'>\n            <Form.Label>Confirm Password</Form.Label>\n            <Form.Control type='password' placeholder='Enter password'\n            value={confirmpassword}\n            onChange={(e)=>setConfirmpassword(e.target.value)}\n            \n            ></Form.Control>\n        </Form.Group>\n\n        <Button type='submit' variant='primary'>\n            Update\n        </Button>\n      </Form>\n\n        </Col>\n        <Col md={9}>\n            <h2>My Orders</h2>\n            {loadingOrders?<Loader/>:errorOrders?<Message variant='danger'>{errorOrders}</Message>\n              :(\n                <Table striped bordered hover responsive className='table-sm'>\n                  <thead>\n                    <tr>\n                      <th>ID</th>\n                      <th>DATE</th>\n                      <th>TOTAL</th>\n                      <th>PAID</th>\n                      <th>DELIVERED</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {orders.map(order=>(\n                      <tr key={order._id}>\n                        <td>{order._id}</td>\n                        <td>{order.createdAt.substr(0,10)}</td>\n                        <td>{order.totalPrice}</td>\n                        <td>{order.isPaid?(\n                          order.paidAt.substr(0,10)\n                        ):(<i className='fas fa-times' style={{color:'red'}}></i>)\n                        }\n                        </td>\n                        <td>{order.isDelivered ?(\n                          order.deliveredAt.substr(0,10)\n                        ):(<i className='fas fa-times' style={{color:'red'}}></i>)\n                        }\n                        </td>\n                        <td>\n                          <LinkContainer to={`/order/${order._id}`}>\n                            <Button  className='btn-sm'variant='light'>Details</Button>\n                          </LinkContainer>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </Table>\n\n              )  \n          \n          }\n\n        </Col>\n  </Row>\n}\n\nexport default ProfileScreen\n"],"mappings":"8PAAA,MAAOA,MAAK,EAAEC,QAAQ,CAACC,SAAS,KAAO,OAAO,CAC9C,OAAQC,IAAI,CAAEC,QAAQ,CAACC,WAAW,KAAO,kBAAkB,CAC3D,OAASC,aAAa,CAAEC,MAAM,KAAQ,gBAAgB,CACtD,OAAQC,IAAI,CAACC,GAAG,CAACC,GAAG,CAACC,MAAM,CAAEC,KAAK,KAAO,iBAAiB,CAC1D,OAAQC,WAAW,CAACC,WAAW,KAAO,aAAa,CACnD,MAAOC,OAAM,KAAM,sBAAsB,CACzC,OAAQC,aAAa,KAAO,wBAAwB,CACpD,MAAOC,QAAO,KAAM,uBAAuB,CAC3C,OAASC,cAAc,CAACC,iBAAiB,KAAO,wBAAwB,CACxE,OAASC,YAAY,KAAQ,yBAAyB,yFACtD,GAAMC,cAAa,CAAG,QAAhBA,cAAa,MAAW,iCAC1B,GAAMC,SAAQ,CAACjB,WAAW,EAAE,CAC5B,cAAqBJ,QAAQ,CAAC,EAAE,CAAC,wCAA1BsB,IAAI,eAACC,OAAO,eACnB,eAAuBvB,QAAQ,CAAC,EAAE,CAAC,yCAA5BwB,KAAK,eAACC,QAAQ,eACrB,eAA6BzB,QAAQ,CAAC,EAAE,CAAC,yCAAlC0B,QAAQ,eAACC,WAAW,eAC3B,eAA2C3B,QAAQ,CAAC,EAAE,CAAC,yCAAhD4B,eAAe,eAACC,kBAAkB,eACzC,eAA2B7B,QAAQ,CAAC,IAAI,CAAC,0CAAlC8B,OAAO,gBAACC,UAAU,gBAEzB,GAAMC,YAAW,CAACnB,WAAW,CAAC,SAAAoB,KAAK,QAAEA,MAAK,CAACD,WAAW,GAAC,CACvD,GAAOE,QAAO,CAAaF,WAAW,CAA/BE,OAAO,CAACC,KAAK,CAAOH,WAAW,CAAvBG,KAAK,CAACC,IAAI,CAAEJ,WAAW,CAAjBI,IAAI,CACzB,GAAMC,UAAS,CAACxB,WAAW,CAAC,SAAAoB,KAAK,QAAEA,MAAK,CAACI,SAAS,GAAC,CAEnD,GAAMC,kBAAiB,CAACzB,WAAW,CAAC,SAAAoB,KAAK,QAAEA,MAAK,CAACK,iBAAiB,GAAC,CACnE,GAAOC,QAAO,CAAED,iBAAiB,CAA1BC,OAAO,CAGd,GAAMC,YAAW,CAAC3B,WAAW,CAAC,SAAAoB,KAAK,QAAEA,MAAK,CAACO,WAAW,GAAC,CACvD,GAAeC,cAAa,CAA2BD,WAAW,CAA3DN,OAAO,CAAqBQ,WAAW,CAASF,WAAW,CAArCL,KAAK,CAAaQ,MAAM,CAAEH,WAAW,CAAnBG,MAAM,CAGrD,GAAOC,SAAQ,CAAEP,SAAS,CAAnBO,QAAQ,CACf,GAAMC,SAAQ,CAACjC,WAAW,EAAE,CAI5B,GAAMkC,SAAQ,CAAG,GAAIzC,cAAa,EAAE,CACpCJ,SAAS,CAAC,UAAI,CACZ,GAAG,CAAC2C,QAAQ,CAAC,CACXvB,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,IAAI,CACH,GAAG,CAACe,IAAI,CAACd,IAAI,CAAC,CACVuB,QAAQ,CAAC5B,cAAc,CAAC,SAAS,CAAC,CAAC,CACnC4B,QAAQ,CAAC1B,YAAY,EAAE,CAAC,CAC5B,CAAC,IAAI,CACDI,OAAO,CAACa,IAAI,CAACd,IAAI,CAAC,CAClBG,QAAQ,CAACW,IAAI,CAACZ,KAAK,CAAC,CAGxB,CACF,CACF,CAAC,CAAC,CAACqB,QAAQ,CAACD,QAAQ,CAACR,IAAI,CAAC,CAAC,CAG3B,GAAMW,cAAa,CAAE,QAAfA,cAAa,CAAGC,CAAC,CAAG,CACxBA,CAAC,CAACC,cAAc,EAAE,CAChB,GAAGvB,QAAQ,GAAGE,eAAe,CAAC,CAC1BG,UAAU,CAAC,uBAAuB,CAAC,CACvC,CAAC,IAAK,CACFc,QAAQ,CAAC3B,iBAAiB,CAAC,CAACgC,EAAE,CAACd,IAAI,CAACe,GAAG,CAAC7B,IAAI,CAAJA,IAAI,CAACE,KAAK,CAALA,KAAK,CAACE,QAAQ,CAARA,QAAQ,CAAC,CAAC,CAAC,CAClE,CACA;AACJ,CAAC,CACD,GAAM0B,YAAW,CAAC,QAAZA,YAAW,EAAK,CACpBC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC,CAC7B,CAAC,CAEH,mBAAO,MAAC,GAAG,yBACL,MAAC,GAAG,EAAC,EAAE,CAAE,CAAE,wBAEb,oBAAI,cAAY,EAAK,CACpBxB,OAAO,eAAI,KAAC,OAAO,EAAC,OAAO,CAAC,QAAQ,UAAEA,OAAO,EAAW,CACxDK,KAAK,eAAG,KAAC,OAAO,EAAC,OAAO,CAAC,QAAQ,UAAEA,KAAK,EAAW,CACnDI,OAAO,eAAG,KAAC,OAAO,EAAC,OAAO,CAAC,SAAS,UAAC,iBAAe,EAAU,CAC9DL,OAAO,eAAG,KAAC,MAAM,IAAE,cACpB,MAAC,IAAI,EAAC,QAAQ,CAAEa,aAAc,wBAE9B,MAAC,IAAI,CAAC,KAAK,EAAC,SAAS,CAAC,MAAM,wBACtB,KAAC,IAAI,CAAC,KAAK,WAAC,MAAI,EAAa,cAC7B,KAAC,IAAI,CAAC,OAAO,EAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,YAAY,CAClD,KAAK,CAAEzB,IAAK,CACZ,QAAQ,CAAE,kBAAC0B,CAAC,QAAGzB,QAAO,CAACyB,CAAC,CAACO,MAAM,CAACC,KAAK,CAAC,EAAC,EAEvB,GACP,cAGb,MAAC,IAAI,CAAC,KAAK,EAAC,SAAS,CAAC,OAAO,wBACzB,KAAC,IAAI,CAAC,KAAK,WAAC,eAAa,EAAa,cACtC,KAAC,IAAI,CAAC,OAAO,EAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,aAAa,CACpD,KAAK,CAAEhC,KAAM,CACb,QAAQ,CAAE,kBAACwB,CAAC,QAAGvB,SAAQ,CAACuB,CAAC,CAACO,MAAM,CAACC,KAAK,CAAC,EAAC,EAExB,GACP,cAEb,MAAC,IAAI,CAAC,KAAK,EAAC,SAAS,CAAC,UAAU,wBAC5B,KAAC,IAAI,CAAC,KAAK,WAAC,WAAS,EAAa,cAClC,KAAC,IAAI,CAAC,OAAO,EAAC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,gBAAgB,CAC1D,KAAK,CAAE9B,QAAS,CAChB,QAAQ,CAAE,kBAACsB,CAAC,QAAGrB,YAAW,CAACqB,CAAC,CAACO,MAAM,CAACC,KAAK,CAAC,EAAC,EAE3B,GACP,cAEb,MAAC,IAAI,CAAC,KAAK,EAAC,SAAS,CAAC,iBAAiB,wBACnC,KAAC,IAAI,CAAC,KAAK,WAAC,kBAAgB,EAAa,cACzC,KAAC,IAAI,CAAC,OAAO,EAAC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,gBAAgB,CAC1D,KAAK,CAAE5B,eAAgB,CACvB,QAAQ,CAAE,kBAACoB,CAAC,QAAGnB,mBAAkB,CAACmB,CAAC,CAACO,MAAM,CAACC,KAAK,CAAC,EAAC,EAElC,GACP,cAEb,KAAC,MAAM,EAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,UAAC,QAExC,EAAS,GACJ,GAEC,cACN,MAAC,GAAG,EAAC,EAAE,CAAE,CAAE,wBACP,oBAAI,WAAS,EAAK,CACjBf,aAAa,cAAC,KAAC,MAAM,IAAE,CAACC,WAAW,cAAC,KAAC,OAAO,EAAC,OAAO,CAAC,QAAQ,UAAEA,WAAW,EAAW,cAElF,MAAC,KAAK,EAAC,OAAO,MAAC,QAAQ,MAAC,KAAK,MAAC,UAAU,MAAC,SAAS,CAAC,UAAU,wBAC3D,oCACE,mCACE,oBAAI,IAAE,EAAK,cACX,oBAAI,MAAI,EAAK,cACb,oBAAI,OAAK,EAAK,cACd,oBAAI,MAAI,EAAK,cACb,oBAAI,WAAS,EAAK,GACf,EACC,cACR,uBACGC,MAAM,CAACc,GAAG,CAAC,SAAAC,KAAK,qBACf,mCACE,oBAAKA,KAAK,CAACP,GAAG,EAAM,cACpB,oBAAKO,KAAK,CAACC,SAAS,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAM,cACvC,oBAAKF,KAAK,CAACG,UAAU,EAAM,cAC3B,oBAAKH,KAAK,CAACI,MAAM,CACfJ,KAAK,CAACK,MAAM,CAACH,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,cACxB,UAAG,SAAS,CAAC,cAAc,CAAC,KAAK,CAAE,CAACI,KAAK,CAAC,KAAK,CAAE,EAAM,EAErD,cACL,oBAAKN,KAAK,CAACO,WAAW,CACpBP,KAAK,CAACQ,WAAW,CAACN,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,cAC7B,UAAG,SAAS,CAAC,cAAc,CAAC,KAAK,CAAE,CAACI,KAAK,CAAC,KAAK,CAAE,EAAM,EAErD,cACL,iCACE,KAAC,aAAa,EAAC,EAAE,kBAAYN,KAAK,CAACP,GAAG,CAAG,uBACvC,KAAC,MAAM,EAAE,SAAS,CAAC,QAAQ,QAAO,CAAC,OAAO,UAAC,SAAO,EAAS,EAC7C,EACb,GAlBEO,KAAK,CAACP,GAAG,CAmBb,EACN,CAAC,EACI,GAGX,GAID,GACN,CACR,CAAC,CAED,cAAe/B,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}