{"ast":null,"code":"import _objectDestructuringEmpty from\"/home/kali/Desktop/c++/proshop/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import React,{useEffect}from'react';import{Link}from'react-router-dom';import{Row,Col,ListGroup,Image,Card,Button}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{getOrderDetails,deliverOrder}from'../actions/orderActions';import Loader from'../components/Loader';import Message from'../components/Message';import{useParams}from'react-router-dom';import{ORDER_DELIVERED_RESET}from'../constants/orderConstansts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var OrderScreen=function OrderScreen(_ref){_objectDestructuringEmpty(_ref);var dispatch=useDispatch();var _useParams=useParams(),id=_useParams.id;console.log('this is id');console.log(id);var orderDetail=useSelector(function(state){return state.orderDetail;});var order=orderDetail.order,loading=orderDetail.loading,error=orderDetail.error;var orderDeliver=useSelector(function(state){return state.orderDeliver;});var loadingDeliver=orderDeliver.loading,successDeliver=orderDeliver.success;console.log(successDeliver);var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;console.log(userInfo);useEffect(function(){if(!order||successDeliver){dispatch({type:ORDER_DELIVERED_RESET});dispatch(getOrderDetails(id));}},[dispatch,id,successDeliver,order]);console.log(orderDetail);// if(loading===false){\n// order.itemsPrice=(order.orderItems.reduce((acc,item)=>acc+item.price*item.qty,0))\n// }\n// console.log(order)\nvar deliveredHandler=function deliveredHandler(){dispatch(deliverOrder(order));};return loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Order \",order._id]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name: \"}),order.user.name]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(order.user.email),children:order.user.email})}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address:\"}),order.shippingAddress.address,\",\",order.shippingAddress.city,' ',order.shippingAddress.postalcode,\",\",' ',order.shippingAddress.country]}),order.isDelivered?/*#__PURE__*/_jsxs(Message,{variant:\"success\",children:[\"Delivered on \",order.deliveredAt]}):/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:\"Not Delivered\"})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method:\"}),order.paymentMethod]}),order.isPaid?/*#__PURE__*/_jsxs(Message,{variant:\"success\",children:[\"Paid on \",order.paidAt]}):/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:\"Not paid\"})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items\"}),order.orderItems.length===0?/*#__PURE__*/_jsx(Message,{children:\"Order is empty\"}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:order.orderItems.map(function(item,index){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:4,children:[item.qty,\" x $\",item.price,\" =$\",item.qty*item.price]})]})},index);})})]})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:\"Items\"})})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Shipping\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",order.shippingPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Tax\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",order.taxPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",order.totalPrice]})]})}),loadingDeliver&&/*#__PURE__*/_jsx(Loader,{}),userInfo.name===\"Admin User\"&&order.isPaid&&!order.isDelivered&&/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn btn-block\",onClick:deliveredHandler,children:\"Mark as Delivered\"})})]})})})]})]});};export default OrderScreen;","map":{"version":3,"names":["React","useEffect","Link","Row","Col","ListGroup","Image","Card","Button","useDispatch","useSelector","getOrderDetails","deliverOrder","Loader","Message","useParams","ORDER_DELIVERED_RESET","OrderScreen","dispatch","id","console","log","orderDetail","state","order","loading","error","orderDeliver","loadingDeliver","successDeliver","success","userLogin","userInfo","type","deliveredHandler","_id","user","name","email","shippingAddress","address","city","postalcode","country","isDelivered","deliveredAt","paymentMethod","isPaid","paidAt","orderItems","length","map","item","index","image","product","qty","price","shippingPrice","taxPrice","totalPrice"],"sources":["/home/kali/Desktop/c++/proshop/src/screens/OrderScreen.js"],"sourcesContent":[" import React,{useEffect} from 'react'\n\n\nimport {Link} from 'react-router-dom'\nimport {Row,Col,ListGroup,Image,Card,Button} from 'react-bootstrap'\nimport {useDispatch,useSelector} from 'react-redux'\nimport { getOrderDetails,deliverOrder} from '../actions/orderActions'\n\nimport Loader from '../components/Loader'\nimport Message from '../components/Message'\nimport { useParams } from 'react-router-dom'\nimport { ORDER_DELIVERED_RESET } from '../constants/orderConstansts'\n\nconst OrderScreen = ({}) => {\n    \n    const dispatch=useDispatch()\n   const {id}=useParams()\n   console.log('this is id')\n    console.log(id);\n\n    const orderDetail=useSelector((state)=>state.orderDetail)\n    const {order,loading,error}=orderDetail\n    const orderDeliver=useSelector(state=>state.orderDeliver)\n    const {loading:loadingDeliver,success:successDeliver}=orderDeliver\n    console.log(successDeliver)\n    const userLogin=useSelector(state=>state.userLogin)\n    const {userInfo}=userLogin\n    console.log(userInfo)\n    useEffect(()=>{\n    \n        if(!order ||successDeliver){\n            dispatch({type:ORDER_DELIVERED_RESET})\n            dispatch(getOrderDetails(id))}\n            \n        },[dispatch,id,successDeliver,order])\n    console.log(orderDetail)\n    // if(loading===false){\n        // order.itemsPrice=(order.orderItems.reduce((acc,item)=>acc+item.price*item.qty,0))\n        // }\n// console.log(order)\n        const deliveredHandler=()=>{\n            dispatch(deliverOrder(order))\n        }\n\n\n  return loading?<Loader/>:error?<Message variant='danger'>{error}</Message>\n  :<><h1>Order {order._id}</h1>\n  <Row>\n            <Col md={8}>\n                <ListGroup variant='flush'>\n                    <ListGroup.Item>\n                        <h2>Shipping</h2>\n                        <p>\n                        <strong>Name: </strong>{order.user.name}\n                        </p>\n                        <p>\n                        <a href={`mailto:${order.user.email}`}>{order.user.email}</a>\n                        </p>\n                        <p>\n                            <strong>Address:</strong>\n                            {order.shippingAddress.address},{order.shippingAddress.city}{' '}\n                            {order.shippingAddress.postalcode},{' '}\n                            {order.shippingAddress.country}\n                        </p>\n                        {order.isDelivered ? <Message variant='success'>Delivered on {order.deliveredAt}</Message>:\n                        <Message variant='danger'>Not Delivered</Message>\n                        }\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                        <h2>Payment Method</h2>\n                        <p>\n                        <strong>Method:</strong>\n                        {order.paymentMethod}\n                        </p>\n                        {order.isPaid ? <Message variant='success'>Paid on {order.paidAt}</Message>:\n                        <Message variant='danger'>Not paid</Message>\n                        }\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                        <h2>Order Items</h2>\n                        {order.orderItems.length === 0 ?<Message>Order is empty</Message>\n                        :(<ListGroup variant='flush'>\n                            {order.orderItems.map((item,index)=>(\n                                <ListGroup.Item key={index}>\n                                    <Row>\n                                        <Col md={1}>\n                                            <Image src={item.image} alt={item.name}\n                                             fluid rounded/>\n                                        </Col>\n                                        <Col>\n                                        <Link to={`/product/${item.product}`}>\n                                            {item.name}\n                                        </Link>\n                                        </Col>\n                                        <Col md={4}>\n                                            {item.qty} x ${item.price} =${item.qty*item.price}\n                                        </Col>\n                                        </Row>\n                                </ListGroup.Item>\n                            ))}\n                        </ListGroup>)}\n                    </ListGroup.Item>\n                </ListGroup>\n            </Col> \n                                        <Col md={4}>\n                                            <Card>\n                                                <ListGroup variant='flush'>\n                                                    <ListGroup.Item>\n                                                        <h2>Order Summary</h2>\n\n                                                    </ListGroup.Item>\n                                                    <ListGroup.Item>\n                                                        <Row>\n                                                            <Col>Items</Col>\n                                                            {/* <Col>${order.itemsPrice}</Col> */}\n                                                        </Row>\n                                                    </ListGroup.Item>\n                                                    <ListGroup.Item>\n                                                        <Row>\n                                                            <Col>Shipping</Col>\n                                                            <Col>${order.shippingPrice}</Col>\n                                                        </Row>\n                                                    </ListGroup.Item>\n\n                                                    <ListGroup.Item>\n                                                        <Row>\n                                                            <Col>Tax</Col>\n                                                            <Col>${order.taxPrice}</Col>\n                                                        </Row>\n                                                    </ListGroup.Item>\n\n                                                    <ListGroup.Item>\n                                                        <Row>\n                                                            <Col>Total</Col>\n                                                            <Col>${order.totalPrice}</Col>\n                                                        </Row>\n                                                    </ListGroup.Item>\n                                                    {loadingDeliver && <Loader/>}\n                                                   {userInfo.name===\"Admin User\" && order.isPaid && !order.isDelivered &&\n                                                   (<ListGroup.Item>\n                                                    <Button type='button' className='btn btn-block'\n                                                     onClick={deliveredHandler}>Mark as Delivered</Button>\n                                                   </ListGroup.Item>)} \n                                                </ListGroup>\n                                            </Card>\n                                        </Col>\n                             \n        </Row>\n  \n  </>\n  }\nexport default OrderScreen"],"mappings":"0IAAC,MAAOA,MAAK,EAAEC,SAAS,KAAO,OAAO,CAGtC,OAAQC,IAAI,KAAO,kBAAkB,CACrC,OAAQC,GAAG,CAACC,GAAG,CAACC,SAAS,CAACC,KAAK,CAACC,IAAI,CAACC,MAAM,KAAO,iBAAiB,CACnE,OAAQC,WAAW,CAACC,WAAW,KAAO,aAAa,CACnD,OAASC,eAAe,CAACC,YAAY,KAAO,yBAAyB,CAErE,MAAOC,OAAM,KAAM,sBAAsB,CACzC,MAAOC,QAAO,KAAM,uBAAuB,CAC3C,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,qBAAqB,KAAQ,8BAA8B,8IAEpE,GAAMC,YAAW,CAAG,QAAdA,YAAW,MAAW,iCAExB,GAAMC,SAAQ,CAACT,WAAW,EAAE,CAC7B,eAAWM,SAAS,EAAE,CAAfI,EAAE,YAAFA,EAAE,CACTC,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC,CACxBD,OAAO,CAACC,GAAG,CAACF,EAAE,CAAC,CAEf,GAAMG,YAAW,CAACZ,WAAW,CAAC,SAACa,KAAK,QAAGA,MAAK,CAACD,WAAW,GAAC,CACzD,GAAOE,MAAK,CAAgBF,WAAW,CAAhCE,KAAK,CAACC,OAAO,CAAQH,WAAW,CAA1BG,OAAO,CAACC,KAAK,CAAEJ,WAAW,CAAlBI,KAAK,CAC1B,GAAMC,aAAY,CAACjB,WAAW,CAAC,SAAAa,KAAK,QAAEA,MAAK,CAACI,YAAY,GAAC,CACzD,GAAeC,eAAc,CAAyBD,YAAY,CAA3DF,OAAO,CAAwBI,cAAc,CAAEF,YAAY,CAApCG,OAAO,CACrCV,OAAO,CAACC,GAAG,CAACQ,cAAc,CAAC,CAC3B,GAAME,UAAS,CAACrB,WAAW,CAAC,SAAAa,KAAK,QAAEA,MAAK,CAACQ,SAAS,GAAC,CACnD,GAAOC,SAAQ,CAAED,SAAS,CAAnBC,QAAQ,CACfZ,OAAO,CAACC,GAAG,CAACW,QAAQ,CAAC,CACrB/B,SAAS,CAAC,UAAI,CAEV,GAAG,CAACuB,KAAK,EAAGK,cAAc,CAAC,CACvBX,QAAQ,CAAC,CAACe,IAAI,CAACjB,qBAAqB,CAAC,CAAC,CACtCE,QAAQ,CAACP,eAAe,CAACQ,EAAE,CAAC,CAAC,EAEjC,CAAC,CAAC,CAACD,QAAQ,CAACC,EAAE,CAACU,cAAc,CAACL,KAAK,CAAC,CAAC,CACzCJ,OAAO,CAACC,GAAG,CAACC,WAAW,CAAC,CACxB;AACI;AACA;AACR;AACQ,GAAMY,iBAAgB,CAAC,QAAjBA,iBAAgB,EAAK,CACvBhB,QAAQ,CAACN,YAAY,CAACY,KAAK,CAAC,CAAC,CACjC,CAAC,CAGP,MAAOC,QAAO,cAAC,KAAC,MAAM,IAAE,CAACC,KAAK,cAAC,KAAC,OAAO,EAAC,OAAO,CAAC,QAAQ,UAAEA,KAAK,EAAW,cACzE,wCAAE,sBAAI,QAAM,CAACF,KAAK,CAACW,GAAG,GAAM,cAC7B,MAAC,GAAG,yBACM,KAAC,GAAG,EAAC,EAAE,CAAE,CAAE,uBACP,MAAC,SAAS,EAAC,OAAO,CAAC,OAAO,wBACtB,MAAC,SAAS,CAAC,IAAI,yBACX,oBAAI,UAAQ,EAAK,cACjB,kCACA,wBAAQ,QAAM,EAAS,CAACX,KAAK,CAACY,IAAI,CAACC,IAAI,GACnC,cACJ,gCACA,UAAG,IAAI,kBAAYb,KAAK,CAACY,IAAI,CAACE,KAAK,CAAG,UAAEd,KAAK,CAACY,IAAI,CAACE,KAAK,EAAK,EACzD,cACJ,kCACI,wBAAQ,UAAQ,EAAS,CACxBd,KAAK,CAACe,eAAe,CAACC,OAAO,CAAC,GAAC,CAAChB,KAAK,CAACe,eAAe,CAACE,IAAI,CAAE,GAAG,CAC/DjB,KAAK,CAACe,eAAe,CAACG,UAAU,CAAC,GAAC,CAAC,GAAG,CACtClB,KAAK,CAACe,eAAe,CAACI,OAAO,GAC9B,CACHnB,KAAK,CAACoB,WAAW,cAAG,MAAC,OAAO,EAAC,OAAO,CAAC,SAAS,WAAC,eAAa,CAACpB,KAAK,CAACqB,WAAW,GAAW,cAC1F,KAAC,OAAO,EAAC,OAAO,CAAC,QAAQ,UAAC,eAAa,EAAU,GAEpC,cACjB,MAAC,SAAS,CAAC,IAAI,yBACX,oBAAI,gBAAc,EAAK,cACvB,kCACA,wBAAQ,SAAO,EAAS,CACvBrB,KAAK,CAACsB,aAAa,GAChB,CACHtB,KAAK,CAACuB,MAAM,cAAG,MAAC,OAAO,EAAC,OAAO,CAAC,SAAS,WAAC,UAAQ,CAACvB,KAAK,CAACwB,MAAM,GAAW,cAC3E,KAAC,OAAO,EAAC,OAAO,CAAC,QAAQ,UAAC,UAAQ,EAAU,GAE/B,cACjB,MAAC,SAAS,CAAC,IAAI,yBACX,oBAAI,aAAW,EAAK,CACnBxB,KAAK,CAACyB,UAAU,CAACC,MAAM,GAAK,CAAC,cAAE,KAAC,OAAO,WAAC,gBAAc,EAAU,cAC/D,KAAC,SAAS,EAAC,OAAO,CAAC,OAAO,UACvB1B,KAAK,CAACyB,UAAU,CAACE,GAAG,CAAC,SAACC,IAAI,CAACC,KAAK,qBAC7B,KAAC,SAAS,CAAC,IAAI,wBACX,MAAC,GAAG,yBACA,KAAC,GAAG,EAAC,EAAE,CAAE,CAAE,uBACP,KAAC,KAAK,EAAC,GAAG,CAAED,IAAI,CAACE,KAAM,CAAC,GAAG,CAAEF,IAAI,CAACf,IAAK,CACtC,KAAK,MAAC,OAAO,OAAE,EACd,cACN,KAAC,GAAG,wBACJ,KAAC,IAAI,EAAC,EAAE,oBAAce,IAAI,CAACG,OAAO,CAAG,UAChCH,IAAI,CAACf,IAAI,EACP,EACD,cACN,MAAC,GAAG,EAAC,EAAE,CAAE,CAAE,WACNe,IAAI,CAACI,GAAG,CAAC,MAAI,CAACJ,IAAI,CAACK,KAAK,CAAC,KAAG,CAACL,IAAI,CAACI,GAAG,CAACJ,IAAI,CAACK,KAAK,GAC/C,GACA,EAdOJ,KAAK,CAeT,EACpB,CAAC,EACO,GACA,GACT,EACV,cACsB,KAAC,GAAG,EAAC,EAAE,CAAE,CAAE,uBACP,KAAC,IAAI,wBACD,MAAC,SAAS,EAAC,OAAO,CAAC,OAAO,wBACtB,KAAC,SAAS,CAAC,IAAI,wBACX,oBAAI,eAAa,EAAK,EAET,cACjB,KAAC,SAAS,CAAC,IAAI,wBACX,KAAC,GAAG,wBACA,KAAC,GAAG,WAAC,OAAK,EAAM,EAEd,EACO,cACjB,KAAC,SAAS,CAAC,IAAI,wBACX,MAAC,GAAG,yBACA,KAAC,GAAG,WAAC,UAAQ,EAAM,cACnB,MAAC,GAAG,YAAC,GAAC,CAAC7B,KAAK,CAACkC,aAAa,GAAO,GAC/B,EACO,cAEjB,KAAC,SAAS,CAAC,IAAI,wBACX,MAAC,GAAG,yBACA,KAAC,GAAG,WAAC,KAAG,EAAM,cACd,MAAC,GAAG,YAAC,GAAC,CAAClC,KAAK,CAACmC,QAAQ,GAAO,GAC1B,EACO,cAEjB,KAAC,SAAS,CAAC,IAAI,wBACX,MAAC,GAAG,yBACA,KAAC,GAAG,WAAC,OAAK,EAAM,cAChB,MAAC,GAAG,YAAC,GAAC,CAACnC,KAAK,CAACoC,UAAU,GAAO,GAC5B,EACO,CAChBhC,cAAc,eAAI,KAAC,MAAM,IAAE,CAC5BI,QAAQ,CAACK,IAAI,GAAG,YAAY,EAAIb,KAAK,CAACuB,MAAM,EAAI,CAACvB,KAAK,CAACoB,WAAW,eAClE,KAAC,SAAS,CAAC,IAAI,wBACf,KAAC,MAAM,EAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,eAAe,CAC9C,OAAO,CAAEV,gBAAiB,UAAC,mBAAiB,EAAS,EACrC,GACT,EACT,EACL,GAEhC,GAET,CACH,CAAC,CACH,cAAejB,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}